"use strict";
var cmark = require("cmark");

exports.parseAST = function(markdown) {
  var reader = new cmark.DocParser();
  return reader.parse(markdown);
};

"use strict";
exports.exportDot = function(ast, filename) {
  var out = ["digraph \"" + filename + "\" {", "graph [rankdir = \"LR\"];"];
  var n = 0;

  var builder = function(items) {
    var ids = [];

    for (var _iterator = items[Symbol.iterator](), _step; !(_step = _iterator.next()).done; ) {
      var _item = _step.value;
      var _id = n++;
      var _label = _item.t === "Str" ? "'" + _item.c + "'" : _item.t;
      out.push("  n" + _id + " [label=\"" + _label + "\"];");
      var _children = [];
      if (_item.children) {
        _children = _children.concat(builder(_item.children));
      }
      if (_item.inline_content) {
        _children = _children.concat(builder(_item.inline_content));
      }
      if (Array.isArray(_item.c)) {
        _children = _children.concat(builder(_item.c));
      }

      for (var _child, t$2$0 = regeneratorRuntime.values(_children), t$2$1; !(t$2$1 = t$2$0.next()).done; ) {
        _child = t$2$1.value;
        out.push("  n" + _id + " -> n" + _child + ";");
      }

      ids.push(_id);
    }

    return ids;
  };

  builder([ast]);
  out.push('}');
  return out.join("\n");
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL25vbm8vZGV2L21kZGlmZi9zcmMvYXN0LmpzIiwiL2hvbWUvbm9uby9kZXYvbWRkaWZmL3NyYy9kb3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRTVCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtFQUNwQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNsQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9CLENBQUM7OztBQ0xELENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFD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KFwiY21hcmtcIik7XG5cbmV4cG9ydHMucGFyc2VBU1QgPSBmdW5jdGlvbihtYXJrZG93bikge1xuICB2YXIgcmVhZGVyID0gbmV3IGNtYXJrLkRvY1BhcnNlcigpO1xuICByZXR1cm4gcmVhZGVyLnBhcnNlKG1hcmtkb3duKTtcbn07XG4iLCJleHBvcnRzLmV4cG9ydERvdCA9IGZ1bmN0aW9uKGFzdCwgZmlsZW5hbWUpIHtcbiAgdmFyIG91dCA9IFtgZGlncmFwaCBcIiR7IGZpbGVuYW1lIH1cIiB7YCwgYGdyYXBoIFtyYW5rZGlyID0gXCJMUlwiXTtgXTtcbiAgdmFyIG4gPSAwO1xuXG4gIHZhciBidWlsZGVyID0gZnVuY3Rpb24oaXRlbXMpIHtcbiAgICB2YXIgaWRzID0gW107XG4gICAgZm9yIChsZXQgaXRlbSBvZiBpdGVtcykge1xuICAgICAgbGV0IGlkID0gbisrO1xuICAgICAgbGV0IGxhYmVsID0gaXRlbS50ID09PSBcIlN0clwiID8gYCckeyBpdGVtLmMgfSdgIDogaXRlbS50O1xuICAgICAgb3V0LnB1c2goYCAgbiR7IGlkIH0gW2xhYmVsPVwiJHsgbGFiZWwgfVwiXTtgKTtcbiAgICAgIGxldCBjaGlsZHJlbiA9IFtdO1xuICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5jb25jYXQoYnVpbGRlcihpdGVtLmNoaWxkcmVuKSk7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbS5pbmxpbmVfY29udGVudCkge1xuICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmNvbmNhdChidWlsZGVyKGl0ZW0uaW5saW5lX2NvbnRlbnQpKTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0uYykpIHtcbiAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5jb25jYXQoYnVpbGRlcihpdGVtLmMpKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgICAgIG91dC5wdXNoKGAgIG4keyBpZCB9IC0+IG4keyBjaGlsZCB9O2ApXG4gICAgICB9XG4gICAgICBpZHMucHVzaChpZCk7XG4gICAgfVxuICAgIHJldHVybiBpZHM7XG4gIH07XG5cbiAgYnVpbGRlcihbYXN0XSk7XG4gIG91dC5wdXNoKCd9Jyk7XG4gIHJldHVybiBvdXQuam9pbihcIlxcblwiKTtcbn07XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=