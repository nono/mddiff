"use strict";
var cmark = require("cmark");

exports.parseAST = function(markdown) {
  var reader = new cmark.DocParser();
  return reader.parse(markdown);
};

"use strict";
exports.exportDot = function(ast, filename) {
  var out = ["digraph \"" + filename + "\" {", "graph [rankdir = \"LR\"];"];
  var n = 0;

  var builder = function(items) {
    var ids = [];

    for (var _iterator = items[Symbol.iterator](), _step; !(_step = _iterator.next()).done; ) {
      var _item = _step.value;
      var _id = n++;
      var _label = _item.t === "Str" ? "'" + _item.c + "'" : _item.t;
      out.push("  n" + _id + " [label=\"" + _label + "\"];");
      var _children = [];
      if (_item.children) {
        _children = _children.concat(builder(_item.children));
      }
      if (_item.inline_content) {
        _children = _children.concat(builder(_item.inline_content));
      }
      if (Array.isArray(_item.c)) {
        _children = _children.concat(builder(_item.c));
      }

      for (var _child, t$2$0 = regeneratorRuntime.values(_children), t$2$1; !(t$2$1 = t$2$0.next()).done; ) {
        _child = t$2$1.value;
        out.push("  n" + _id + " -> n" + _child + ";");
      }

      ids.push(_id);
    }

    return ids;
  };

  builder([ast]);
  out.push('}');
  return out.join("\n");
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL25vbm8vZGV2L21kZGlmZi9zcmMvYXN0LmpzIiwiL2hvbWUvbm9uby9kZXYvbWRkaWZmL3NyYy9kb3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRTVCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtFQUNwQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNsQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9CLENBQUM7OztBQ0xELENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFD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cXVpcmUoXCJjbWFya1wiKTtcblxuZXhwb3J0cy5wYXJzZUFTVCA9IGZ1bmN0aW9uKG1hcmtkb3duKSB7XG4gIHZhciByZWFkZXIgPSBuZXcgY21hcmsuRG9jUGFyc2VyKCk7XG4gIHJldHVybiByZWFkZXIucGFyc2UobWFya2Rvd24pO1xufTtcbiIsImV4cG9ydHMuZXhwb3J0RG90ID0gZnVuY3Rpb24oYXN0LCBmaWxlbmFtZSkge1xuICB2YXIgb3V0ID0gW2BkaWdyYXBoIFwiJHsgZmlsZW5hbWUgfVwiIHtgLCBgZ3JhcGggW3JhbmtkaXIgPSBcIkxSXCJdO2BdO1xuICB2YXIgbiA9IDA7XG5cbiAgdmFyIGJ1aWxkZXIgPSBmdW5jdGlvbihpdGVtcykge1xuICAgIHZhciBpZHMgPSBbXTtcbiAgICBmb3IgKGxldCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICBsZXQgaWQgPSBuKys7XG4gICAgICBsZXQgbGFiZWwgPSBpdGVtLnQgPT09IFwiU3RyXCIgPyBgJyR7IGl0ZW0uYyB9J2AgOiBpdGVtLnQ7XG4gICAgICBvdXQucHVzaChgICBuJHsgaWQgfSBbbGFiZWw9XCIkeyBsYWJlbCB9XCJdO2ApO1xuICAgICAgbGV0IGNoaWxkcmVuID0gW107XG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmNvbmNhdChidWlsZGVyKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtLmlubGluZV9jb250ZW50KSB7XG4gICAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uY29uY2F0KGJ1aWxkZXIoaXRlbS5pbmxpbmVfY29udGVudCkpO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbS5jKSkge1xuICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmNvbmNhdChidWlsZGVyKGl0ZW0uYykpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgb3V0LnB1c2goYCAgbiR7IGlkIH0gLT4gbiR7IGNoaWxkIH07YCk7XG4gICAgICB9XG4gICAgICBpZHMucHVzaChpZCk7XG4gICAgfVxuICAgIHJldHVybiBpZHM7XG4gIH07XG5cbiAgYnVpbGRlcihbYXN0XSk7XG4gIG91dC5wdXNoKCd9Jyk7XG4gIHJldHVybiBvdXQuam9pbihcIlxcblwiKTtcbn07XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=